
[[#assert|assert]] 4.5.1
[[#static_assert()|static_assert()]] 4.5.2

# assert

Стандартная библиотека предлагает отладочный макрос `assert()`, для утверждений, что условие должно выполняться во время выполнения программы. Например:
```c++
void f(const char* p)
{
	assert(p!=nullptr);        // p must not be the nullptr
	// ...
}
```

Если условие `assert()` не выполняется в “режиме отладки”, программа завершается. Если программа скомпилирована не в режиме отладки, `assert()` не проверяется. Это довольно грубо и негибко, но часто лучше, чем ничего.

# static_assert()

Исключения сообщают об ошибках, обнаруженных во время выполнения. Обычно предпочтительнее, если ошибка может быть обнаружена во время компиляции. Именно для этого предназначена большая часть системы типов и средств для указания интерфейсов к пользовательским типам. Однако мы также можем выполнять простые проверки большинства свойств, которые известны во время компиляции, и сообщать о сбоях, в виде сообщений компилятора об ошибках. Например:
```c++
static_assert(4<=sizeof(int), "integers are too small"); // check integer size
```

Это приведет к выводу `integers are too small`, если `4<=sizeof(int)` не выполняется; то есть, если `int` в этой системе не содержит по крайней мере 4 байт. Мы называем такие заявления об ожиданиях утверждениями.

Механизм `static_assert` может использоваться для всего, что может быть выражено в терминах константных выражений. Например:
```c++
constexpr double C = 299792.458;           // km/s

void f(double speed)
{
	// 160 km/h == 160.0/(60*60) km/s
	constexpr double local_max = 160.0/(60*60);

	// error: speed must be a constant
	static_assert(speed < C,"can't go that fast");

	static_assert(local_max < C,"can't go that fast"); // OK
	
	// ...
}
```

В общем случае `static_assert(A,S)` выводит `S` как сообщение компилятора об ошибке, если `A` не `true`. Если вы не хотите, чтобы печаталось конкретное сообщение, опустите `S`, и компилятор выдаст сообщение по умолчанию:
```c++
static_assert(4<=sizeof(int));      // use default message
```

Сообщение по умолчанию обычно представляет собой местоположение `static_assert` в исходниках и символьное представление утвержденного предиката. 

Одним из важных применений [[static#static_assert|static_assert]] является создание утверждений о типах, используемых в качестве параметров в обобщённом программировании ( [[Программирование времени компиляции#Вычисления с использованием constexpr|Вычисления с использованием constexpr]], [[Шаблоны Специализация и перегрузка#Частичная специализация шаблона класса|Частичная специализация шаблона класса]]).

