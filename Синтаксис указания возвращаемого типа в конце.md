# Синтаксис указания возвращаемого типа в конце С++11

Указывайте возвращаемый тип в конце, только если обычный синтаксис (возвращаемый тип в начале) неудобен или нечитабелен.  
  
**Определение**  
В C++ есть две формы декларации функций. В обычной (более старой) форме возвращаемый тип указывается перед именем функции:  
```c++
int foo(int x);
```
  
В C++11 появилась новая форма, использующая **`auto`** перед именем функции и завершающаяся возвращаемым типом, указываемым после списка аргументов. Например, предыдущую декларацию можно записать как:  
```c++
auto foo(int x) -> int;
```

Основное отличие двух форм в том, что завершающий тип находится уже в области видимости самой функции. Конечно, для простых типов (например, **int**) большой разницы нет. Однако для сложных типов (использование типов, объявленных в области видимости класса; или объявленных через параметры функции) это может иметь значение.  
  
**За**  
Возвращаемый тип, указанный в конце, является единственным способом явно его задать для [[Лямбда-выражения|лямбда-выражения]]. В ряде случаев компилятор может самостоятельно вывести возвращаемый тип лямбды, однако это возможно не всегда. И даже в случае умного компилятора, иногда требуется явно указать тип (для читабельности или др.)  
Иногда намного проще и удобнее указать возвращаемый тип в конце, после списка параметров. Особенно в случаях, когда возвращаемый тип зависит от параметров шаблона.  
  
Например:  
```c++
    template <typename T, typename U>    
    auto add(T t, U u) -> decltype(t + u);  
```

понятнее, чем:  
```c++
    template <typename T, typename U>    
    decltype(declval<T&>() + declval<U&>()) add(T t, U u);  
```

**Против**  
Указание возвращаемого типа в конце является новым относительно синтаксисом, у которого нет аналогов в таких (C++-подобных) языках, как C и Java. Поэтому такая форма записи может показаться чуждой.  
  
Существующие кодовые базы содержат огромное количество деклараций в обычном стиле. И они не будут переписываться под новый синтаксис. Поэтому на практике выбор такой: либо использовать только обычный стиль, либо смесь обычного и нового. Далее учитываем: унификация стиля это есть хорошо; единая версия синтаксиса более унифицирована, чем две разные версии. В общем, вы поняли.  
  
**Вердикт**  
Используйте обычный (более старый) стиль декларации функции, когда возвращаемый тип указывается перед именем функции. Новую же форму (возвращаемый тип в конце) используйте либо по явной необходимости (лямбды), либо для улучшения читабельности кода. Причём последний вариант (читабельность) часто свидетельствует о чересчур сложных шаблонах, лучше их избегать.




