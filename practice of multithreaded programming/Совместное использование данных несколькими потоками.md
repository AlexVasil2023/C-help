
1. [[#Проблемы совместного использования данных несколькими потоками|Проблемы совместного использования данных несколькими потоками]] 3.1













Одним из ключевых преимуществ применения потоков для конкурентности является возможность совместного использования (разделения) данных несколькими потоками, поэтому теперь, рассмотрев запуск потоков и управление ими, обратимся к вопросам, связанным с разделением данных.

Представьте на минуту, что вы живете в одной квартире с приятелем. У вас одна кухня и одна ванная на двоих. Обычно ванной не пользуются одновременно несколько человек, и то, что сосед слишком долго плещется в воде, вынуждая вас дожидаться своей очереди, не может не раздражать. Возможно, одному из вас захочется запечь в духовке колбаски, в то время как у другого там готовятся кексы, и из этого тоже не выйдет ничего хорошего. Ну и всем знакомо чувство досады, когда при совместно используемом оборудовании вы на полпути к решению какой-нибудь задачи вдруг обнаруживаете, что кто-то взял что-то нужное вам в данный момент или что-то изменил, а вы рассчитывали, что все останется в прежнем состоянии или на своих местах.

То же самое происходит и с потоками. Если они совместно используют данные, для них нужны правила, определяющие, какой поток и к какому биту данных может получить доступ, когда и как любые обновления данных будут передаваться другим потокам, интересующимся этими данными. Но не стоит радоваться, что можно так легко разделять данные между потоками в одном процессе. Некорректное применение совместных данных — одна из основных причин ошибок, связанных с конкурентностью, и последствия могут быть куда хуже, чем кексы со вкусом колбасы.

Эта глава посвящена безопасной совместной работе с данными нескольких потоков в программах на C++, а также исключению возможных проблем и извлечению максимальных выгод.

# Проблемы совместного использования данных несколькими потоками



























