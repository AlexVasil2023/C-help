# Стиль Imagine

Одна из целей `Qt Quick Controls` - отделить логику элемента управления от его внешнего вида. Для большинства стилей реализация внешнего вида состоит из смеси QML-кода и графических активов. Однако, используя стиль `Imagine`, можно настроить внешний вид приложения на базе `Qt Quick Controls`, используя только графические активы.

Стиль `imagine` основан на 9-патчевых изображениях (https://developer.android.com/guide/topics/graphics/drawables#nine-patch). Подробно о 9-патчевых изображениях и о том, как можно стилизовать каждый элемент управления, рассказывается в документации по стилям `Imagine` (https://doc.qt.io/qt-6/qtquickcontrols2-imagine.html) . Здесь же мы создадим пользовательский стиль для интерфейса воображаемого устройства, чтобы продемонстрировать, как используется этот стиль.

Стиль приложения настраивает элементы управления `ApplicationWindow` и `Button`. Для кнопок обрабатывается обычное состояние, а также состояния "нажато" и "отмечено". Демонстрационное приложение показано ниже.
	![[QML Templ_7.png]]

В коде для этого используется столбец (`Column`) для кликабельных кнопок и сетка (`Grid`) для проверяемых. Щелкающие кнопки также растягиваются по ширине окна.
```c++
import QtQuick
import QtQuick.Controls

ApplicationWindow {
	
	// ...
	
	visible: true
	width: 640
	height: 480
	title: qsTr("Hello World")
	
	Column {
		anchors.top: parent.top
		anchors.left: parent.left
		anchors.margins: 10
		width: parent.width/2
		spacing: 10
		
		// ...
		
		Repeater {
			model: 5
				
			delegate: Button {
				width: parent.width
				height: 70
				text: qsTr("Click me!")
			}
		}
	}
	
	Grid {
		anchors.top: parent.top
		anchors.right: parent.right
		anchors.margins: 10
		
		columns: 2
		spacing: 10
		
		// ...

		Repeater {
			model: 10

			delegate: Button {
				height: 70
				text: qsTr("Check me!")
				checkable: true
			}
		}
	}
}
```
Поскольку мы используем стиль `Imagine`, все элементы управления, которые мы хотим использовать, должны быть стилизованы с помощью графического актива. Самым простым является фон для окна `ApplicationWindow` . Это однопиксельная текстура, определяющая цвет фона. Если назвать файл `applicationwindow-background.png`, а затем указать на него стиль в файле `qtquickcontrols2.conf`, то файл будет подхвачен.
В файле `qtquickcontrols2.conf`, показанном ниже, видно, как мы устанавливаем стиль `Imagine`, а затем задаем для стиля путь , по которому он может искать активы. Наконец, мы задаем некоторые свойства палитры. Доступные свойства палитры можно найти на
странице палитры `QML Basic Type` (https://doc.qt.io/qt-6/qml-palette.html#qtquickcontrols2-palette).
```C++
[Controls]
	Style=Imagine
	
[Imagine]
	Path=:images/imagine
	
[Imagine\Palette]
	Text=#ffffff
	ButtonText=#ffffff
	BrightText=#ffffff
```
Активы для элемента управления `Button - button-background.9.png` , `button-background-pressed.9.png` и `button-background- checked.9.png`. Они соответствуют шаблону `control-element-state`. Файл `button- background.9.png` используется для всех состояний без конкретного актива. В соответствии со справочной таблицей элементов стиля
`Imagine` (https://doc.qt.io/qt-6/qtquickcontrols2-imagine.html#element-reference) , кнопка может иметь следующие состояния:
* disabled
* pressed
* checked
* checkable
* focused
* highlighted
* flat
* mirrored
* hovered

Необходимые состояния зависят от пользовательского интерфейса. Например, стиль `hovered` никогда не используется в сенсорных интерфейсах.
![[QML Templ_8.png]]

Если посмотреть на увеличенную версию `button-background-checked.9.png` выше, то можно увидеть направляющие линии 9 патчей по бокам. Пурпурный фон был добавлен для наглядности. В активе, использованном в примере, эта область на самом деле
прозрачная.

Пиксели по краям изображения могут быть белыми/прозрачными, черными или красными. Они имеют различные значения, которые мы рассмотрим по порядку.

* Черные линии вдоль левой и верхней сторон актива отмечают растягиваемые части изображения. Это означает, что закругленные углы и белый маркер в примере не пострадают при растягивании кнопки.
* Черные линии вдоль правой и нижней сторон актива отмечают область, используемую для содержимого элемента управления. В примере это та часть кнопки, которая используется для текста.
* Красные линии вдоль правой и нижней сторон актива обозначают области вставки. Эти области являются частью изображения, но не считаются частью элемента управления. Для приведенного выше изображения, отмеченного флажком, это используется для создания мягкого ореола, выходящего за пределы кнопки.

Демонстрация использования области вставки показана в `button- background.9.png` (внизу) и `button-background- checked.9.png` (вверху): изображение как бы подсвечивается, но не перемещается.
![[QML Templ_9.png]]


















