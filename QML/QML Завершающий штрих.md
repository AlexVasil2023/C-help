# Завершающий штрих

Приложение еще не полностью готово. Мы все еще хотим показать флаги и позволить пользователю модифицировать документ, удаляя города из модели.

В данном примере файлы флагов хранятся относительно документа `main.qml` в папке `flags`. Чтобы иметь возможность отображать их в колонке таблицы, необходимо определить пользовательский делегат для отрисовки изображения флага.

```c++
TableViewColumn {
	delegate: Item {
		Image {
			anchors.centerIn: parent
			source: 'flags/' + styleData.value
		}
	}

	role: 'flag'
	title: "Flag"
	width: 40
}
```

Это все, что требуется для отображения флага. Он передает делегату свойство `flag` из JS-модели в виде `styleData.value`. Затем делегат настраивает путь к изображению так, чтобы предварительно добавить `flags/`, и отображает его как Элемент изображения .

Для удаления мы используем аналогичную технику отображения кнопки удаления.

```c++
TableViewColumn {
	
	delegate: Button {
		iconSource: "remove.png"
		
		onClicked: {
			var data = view.model
			data.splice(styleData.row, 1)
			view.model = data
		}
	}
	
	width: 40
}
```

Для операции удаления данных мы завладеваем моделью представления и удаляем одну запись с помощью функции JS splice. Этот метод доступен нам, поскольку модель относится к типу `JS array`. Метод `splice` изменяет содержимое массива, удаляя существующие элементы и/или добавляя новые.

JS-массив, к сожалению, не так умен, как Qt-модель, например [[QAbstractItemModel|QAbstractItemModel]], которая будет уведомлять представление об изменении строки или данных. Представление не будет показывать обновленные данные, поскольку оно никогда не уведомляется о каких-либо изменениях. Только когда мы устанавливаем данные обратно в представление, представление распознает, что появились новые данные, и обновляет содержимое представления.

Повторная установка модели с помощью `view.model = data` - это способ сообщить представлению о том, что данные были изменены.

![[QML js_3.png]]








































