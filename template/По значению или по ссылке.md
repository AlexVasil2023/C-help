
[[#По значению или по ссылке|По значению или по ссылке]] 7



# По значению или по ссылке

Поскольку C++ изначально предоставляет возможность передачи аргумента в функцию и по значению, и по ссылке, не всегда просто решить, какой из методов выбрать: обычно передача по ссылке дешевле для нетривиальных объектов, но более сложна. C++11 добавил еще и семантику перемещения, так что теперь
у нас есть различные способы передачи по ссылке.

1. **`х const&`** (константная [[rvalue|l-ссылка]]):
параметр ссылается на переданный объект, который невозможно модифицировать.
2. **`х&`** (неконстантная [[rvalue|l-ссылка]]):
параметр ссылается на переданный объект, который можно модифицировать.
1. **`Х&&`** ([[rvalue|г-ссылка]]):
параметр ссылается на переданный объект с семантикой перемещения, что означает, что его можно модифицировать или “украсть” его значение.

Выбор способа объявления параметров с известными конкретными типами является достаточно сложной задачей. В шаблонах типы не известны, и поэтому становится еще труднее решить, какой механизм передачи аргументов использовать в том или ином случае.

Тем не менее мы рекомендовали [[Шаблоны функций#Передача по значению или по ссылке|передавать параметры в шаблоны функций по значению]], если только нет веских причин поступать иначе, например, следующих:

* невозможность копирования;
* параметры используются для возврата данных;
* шаблоны просто передают параметры куда-то еще, сохраняя все свойства исходных аргументов;
* имеется серьезное улучшение производительности.

В этой главе обсуждаются различные подходы к объявлению параметров в шаблонах, причины общей рекомендации передавать аргументы по значению, а также аргументы в пользу отказа от этого решения. Кроме того, здесь рассматриваются сложные проблемы, с которыми вы столкнетесь при работе со строковыми литералами и другими видами массивов.

При чтении этой главы было бы полезно ознакомиться с терминологией, связанной с категориями значений ( [[значение#l-значение|l-значения]], [[значение#r-значения|r-значения]], [[значение#pr-значения|pr-значения]], [[значение#x-значения|х-значения]] и [[значение#gl-значение|gl-значение]].).

# Передача по значению
143




























