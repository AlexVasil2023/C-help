
# Применение концептов для упрощения выражений enable_if<>

Даже при использовании шаблонов псевдонимов синтаксис [[enable_if|enable_if]] довольно неуклюж, поскольку использует обходной путь: для получения желаемого результата мы добавляем дополнительный параметр шаблона и “злоупотребляем” этим параметром для предоставления определенных требований к [[Шаблоны функций|шаблонам функций]], чтобы последние были в принципе доступны. Код, подобный получающемуся, трудно читать, и он делает остальные части [[Шаблоны функций|шаблона функции]] трудными для понимания.

В принципе нам нужна просто возможность языка, которая бы позволяла формулировать требования или ограничения для функции таким образом, чтобы функция игнорировалась, если она не соответствует указанным требованиям/ограничениям.

Этот вопрос должен был быть решен долгожданной возможностью языка под названием концепты (concepts), которая позволяет формулировать требования/условия для шаблонов с использованием собственного простого синтаксиса. К сожалению, несмотря на долгое обсуждение, концепты пока еще не стали частью стандарта C++17. Однако некоторые компиляторы предоставляют экспериментальную поддержку такой возможности, и, вероятно, концепты станут частью очередного, следующего после C++17, стандарта.

При наличии концептов в том виде, в котором они были предложены, нам было бы достаточно просто написать:
```c++
template<typename STR>
requires std::is_convertible_v<STR, std::string>
Person(STR&& n) : name(std::forward<STR>(n))
{
	...
}
```

Можно даже указать требование как обобщенный концепт
```c++
template<typename Т>
concept ConvertibleToString = std::is_convertible_v<T, std::string>;
```

и сформулировать этот концепт в виде требования:
```c++
template<typename STR>
requires ConvertibleToString<STR>
Person(STR&& n)
	: name(std::forward<STR>(n))
{
	...
}
```

Оно может быть сформулировано и следующим образом:
```c++
template<ConvertibleToString STR>
Person(STR&& n) : name(std::forward<STR>(n))
{
	...
}
```

Более подробно концепты C++ рассматриваются в #приложении_Д, “Концепты”.

