
[[#Инстанцирование|Инстанцирование]] 14
1. [[#Инстанцирование по требованию|Инстанцирование по требованию]] 14.1




# Инстанцирование

Инстанцирование (instantiation) шаблонов — это процесс, при котором на основе обобщенного определения шаблонов генерируются типы и функции. В C++ концепция инстанцирования шаблонов играет фундаментальную роль, однако она несколько запутана. Одна из основных причин этой запутанности состоит в том, что определения генерируемых шаблоном элементов не сосредоточены в одном месте исходного кода. Местонахождение определения шаблона, его использования и определения аргументов — все это играет роль.

В данной главе объясняется, как организовать исходный код для надлежащего использования шаблонов. Кроме того, здесь представлены различные методы, которые используются в наиболее популярных компиляторах C++ для инстанцирования шаблонов. Хотя все эти методы должны быть семантически эквивалентны, полезно понимать основные принципы, лежащие в основе стратегии инстанцирования, которой придерживается ваш компилятор. С одной стороны, каждый механизм инстанцирования обладает своим набором мелких особенностей, с другой — он подвергается влиянию конечных спецификаций языка C++.

# Инстанцирование по требованию

Когда компилятор C++ встречает использование специализации шаблона, он создает ее, подставляя вместо параметров шаблона необходимые аргументы. Эти действия выполняются автоматически и не требуют каких бы то ни было указаний от пользовательского кода (или от определения шаблона). Это инстанцирование по требованию ставит шаблоны C++ особняком по отношению к ряду подобных функциональных возможностей в других ранних компилируемых языках (наподобие Ada или Eiffel; некоторые из этих языков требуют явных директив инстанцирования, в то время как другие используют механизмы диспетчеризации времени выполнения для полного устранения процесса инстанцирования). Это инстанцирование шаблона по требованию называют неявным (`implicit`) или автоматическим (`automatic`) инстанцированием. Шаблоны C++ стоят особняком по отношению к подобным возможностям других компилируемых языков программирования.

При инстанцировании по требованию компилятор обычно нуждается в доступе к полному определению (другими словами, не только к объявлению) шаблона


















