
# Класс QToolButton

При добавлении действия на панель инструментов автоматически создается кнопка, реализуемая классом `QToolButton`. Получить указатель на кнопку позволяет метод `widgetForAction()` из класса [[QToolBar|QToolBar]]. Иерархия наследования для класса `QToolButton` выглядит так:
```
(QObject, QPaintDevice) — QWidget — QAbstractButton — QToolButton
```

Конструктор класса `QToolButton` имеет следующий формат:
```c++
#include <QToolButton>

QToolButton(QWidget *parent = nullptr)
```

Класс `QToolButton` наследует все методы из базовых классов и содержит следующие дополнительные методы (перечислены только основные методы; полный список смотрите в документации):

> **setDefaultAction()** — связывает объект действия с кнопкой. Метод является слотом. Прототип метода:
```c++
void setDefaultAction(QAction *action)
```

> **defaultAction()** — возвращает указатель на объект действия (экземпляр класса [[QAction|QAction]]), связанный с кнопкой. Прототип метода:
```c++
QAction *defaultAction() const
```

> **setToolButtonStyle()** — задает стиль кнопки. Метод является слотом. Допустимые значения параметра `style` см. в [[QToolButton|setToolButtonStyle()]]. Прототип метода:
```c++
void setToolButtonStyle(Qt::ToolButtonStyle style)
```

> **toolButtonStyle()** — возвращает стиль кнопки. Прототип метода:
```c++
Qt::ToolButtonStyle toolButtonStyle() const
```

> **setMenu()** — добавляет меню. Прототип метода:
```c++
void setMenu(QMenu *menu)
```

> **menu()** — возвращает указатель на меню (экземпляр класса [[QMenu|QMenu]]) или нулевой указатель. Прототип метода:
```c++
QMenu *menu() const
```

> **showMenu()** — отображает меню, связанное с кнопкой. Метод является слотом. Прототип метода:
```c++
void showMenu()
```

> **setPopupMode()** — задает режим отображения связанного с кнопкой меню. Прототип метода:
```c++
void setPopupMode(QToolButton::ToolButtonPopupMode mode)
```

В качестве параметра указываются следующие константы:
* **`QToolButton::DelayedPopup`** — меню отображается при удержании кнопки нажатой некоторый промежуток времени;
* **`QToolButton::MenuButtonPopup`** — справа от кнопки отображается кнопка со стрелкой, нажатие которой приводит к немедленному отображению меню;
* **`QToolButton::InstantPopup`** — нажатие кнопки приводит к немедленному отображению меню. Сигнал `triggered()` при этом не генерируется;

> **popupMode()** — возвращает режим отображения связанного с кнопкой меню. Прототип метода:
```c++
QToolButton::ToolButtonPopupMode popupMode() const
```

> **setArrowType()** — позволяет вместо стандартного значка действия установить значок в виде стрелки, указывающей в заданном направлении. В качестве параметра указываются константы `NoArrow` (значение по умолчанию), `UpArrow`, `DownArrow`, `LeftArrow` или `RightArrow`. Прототип метода:
```c++
void setArrowType(Qt::ArrowType type)
```

> **setAutoRaise()** — если в качестве параметра указано значение `false`, то кнопка будет отображаться с рамкой. По умолчанию кнопка сливается с фоном, а при наведении указателя мыши становится выпуклой. Прототип метода:
```c++
void setAutoRaise(bool enable)
```

Класс `QToolButton` содержит сигнал `triggered(QAction *)`, который генерируется при нажатии кнопки или комбинации клавиш, а также при выборе пункта в связанном меню. Внутри обработчика через параметр доступен указатель на экземпляр класса [[QAction|QAction]].
