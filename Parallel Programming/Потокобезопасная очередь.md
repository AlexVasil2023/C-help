
[[#Потокобезопасная очередь|Потокобезопасная очередь]] 12.3
1. [[#Блокировка очереди целиком|Блокировка очереди целиком]] 12.3.1

# Потокобезопасная очередь

Как и в предыдущем разделе, начнём с ответа на вопрос, что такое очередь. Стандартный адаптер контейнера [[queue|std::queue]], объявленный в заголовочном файле `<queue>`, воплощает принцип «первым пришёл – первым ушёл» (англ. FIFO – first in first out). В его интерфейсе четыре основные функции.

![[ParallelProg_249.png]]

Функция-член `push` вставляет элемент в конец очереди, функция `pop` удаляет элемент из её начала; функция `back` позволяет получить ссылку на последний элемент очереди, а функция `front` – на первый. Кроме того, есть ещё вспомогательные функции, возвращающие размер очереди и позволяющие сравнивать очереди между собой. Пример использования очереди показан ниже.

```c++
#include <queue>

...

std::queue<int> myQueue;
std::cout << myQueue.empty() << ‘\n’;              // true
std::cout << myQueue.size() << ‘\n’;               // 0

myQueue.push(1);
myQueue.push(2);
myQueue.push(3);

std::cout << myQueue.back() << ‘\n’;              // 3
std::cout << myQueue.front() << ‘\n’;             // 1

while (!myQueue.empty()){
	std::cout << myQueue.back() << “ “;
	std::cout << myQueue.front() << “ : “;
	myQueue.pop();
}                                                // 3 1 : 3 2 : 3 3

std::cout << myQueue.empty() << ‘\n’;            // true
std::cout << myQueue.size() << ‘\n’;             // 0
```

Первый вариант реализации потокобезопасной очереди весьма похож на рассмотренную выше реализацию потокобезопасного стека.

## Блокировка очереди целиком

































